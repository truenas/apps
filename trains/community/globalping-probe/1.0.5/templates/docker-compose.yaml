{% set tpl = ix_lib.base.render.Render(values) %}

{% set c1 = tpl.add_container(values.consts.probe_container_name, "image") %}

{# Add NET_RAW capability for ping/ICMP operations #}
{% do c1.add_caps(["NET_RAW"]) %}

{% if values.globalping.adoption_token %}
  {% do c1.environment.add_env("GP_ADOPTION_TOKEN", values.globalping.adoption_token) %}
{% endif %}

{# Disable health check since probe doesn't expose any HTTP endpoints #}
{% do c1.healthcheck.disable() %}

{% do tpl.notes.set_body(values.consts.notes_body) %}

{{ tpl.render() | tojson }}
