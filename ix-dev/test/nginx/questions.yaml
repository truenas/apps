groups:
  - name: Network Configuration
    description: Configure Network for Nginx

questions:
  - variable: app
    label: App
    group: App Configuration
    schema:
      type: dict
      attrs:
        - variable: additional_csp_strings
          label: Additional Content Security Policy (List of Strings)
          description: |
            Additional Content Security Policy directives to add to the default CSP.</br>
            These will be merged with the default CSP directives.</br>
            Only add here directives/items that are not already present in the CSP File (/etc/opencloud/csp.yaml).</br>
            If you notice a directive/item is missing that affects the core functionality of OpenCloud, </br>
            or any of the integrations configured via this UI, please open an issue on GitHub.</br>
            CSP keywords should be enclosed in single quotes.</br>
            Example: `'unsafe-eval'`
          schema:
            type: list
            default:
              - directive: connect-src
                items:
                  - https://raw.githubusercontent.com/opencloud-eu/awesome-apps/
                  - https://update.opencloud.eu/
              - directive: frame-src
                items:
                  - https://embed.diagrams.net/
              - directive: img-src
                items:
                  - https://raw.githubusercontent.com/opencloud-eu/awesome-apps/
                  - https://tile.openstreetmap.org/
            items:
              - variable: csp_entry
                label: Content Security Policy Entry
                schema:
                  type: dict
                  attrs:
                    - variable: directive
                      label: Directive
                      schema:
                        type: string
                        required: true
                        enum:
                          - value: child-src
                            description: child-src
                          - value: connect-src
                            description: connect-src
                          - value: default-src
                            description: default-src
                          - value: font-src
                            description: font-src
                          - value: frame-ancestors
                            description: frame-ancestors
                          - value: frame-src
                            description: frame-src
                          - value: img-src
                            description: img-src
                          - value: manifest-src
                            description: manifest-src
                          - value: media-src
                            description: media-src
                          - value: object-src
                            description: object-src
                          - value: script-src
                            description: script-src
                          - value: style-src
                            description: style-src
                    - variable: items
                      label: Items
                      schema:
                        type: list
                        items:
                          - variable: item
                            label: Item
                            schema:
                              type: string
                              required: true
                              default: ""
        - variable: additional_csp_objects
          label: Additional Content Security Policy (List of Objects)
          description: |
            Additional Content Security Policy directives to add to the default CSP.</br>
            These will be merged with the default CSP directives.</br>
            Only add here directives/items that are not already present in the CSP File (/etc/opencloud/csp.yaml).</br>
            If you notice a directive/item is missing that affects the core functionality of OpenCloud, </br>
            or any of the integrations configured via this UI, please open an issue on GitHub.</br>
            CSP keywords should be enclosed in single quotes.</br>
            Example: `'unsafe-eval'`
          schema:
            type: list
            default:
              - directive: connect-src
                items:
                  - value: https://raw.githubusercontent.com/opencloud-eu/awesome-apps/
                  - value: https://update.opencloud.eu/
              - directive: frame-src
                items:
                  - value: https://embed.diagrams.net/
              - directive: img-src
                items:
                  - value: https://raw.githubusercontent.com/opencloud-eu/awesome-apps/
                  - value: https://tile.openstreetmap.org/
            items:
              - variable: csp_entry
                label: Content Security Policy Entry
                schema:
                  type: dict
                  attrs:
                    - variable: directive
                      label: Directive
                      schema:
                        type: string
                        required: true
                        enum:
                          - value: child-src
                            description: child-src
                          - value: connect-src
                            description: connect-src
                          - value: default-src
                            description: default-src
                          - value: font-src
                            description: font-src
                          - value: frame-ancestors
                            description: frame-ancestors
                          - value: frame-src
                            description: frame-src
                          - value: img-src
                            description: img-src
                          - value: manifest-src
                            description: manifest-src
                          - value: media-src
                            description: media-src
                          - value: object-src
                            description: object-src
                          - value: script-src
                            description: script-src
                          - value: style-src
                            description: style-src
                    - variable: items
                      label: Items
                      schema:
                        type: list
                        items:
                          - variable: item
                            label: Item
                            schema:
                              type: dict
                              attrs:
                                - variable: value
                                  label: Value
                                  schema:
                                    type: string
                                    required: true
                                - variable: placeholder
                                  label: ""
                                  schema:
                                    type: string
                                    default: ""
                                    hidden: true
  - variable: network
    label: ""
    group: Network Configuration
    schema:
      type: dict
      attrs:
        - variable: web_port
          label: WebUI Port
          description: The port for Nginx WebUI
          schema:
            type: int
            default: 8080
            required: true
        - variable: some_new_field
          label: Some New Field
          description: Some new field
          schema:
            type: int
            default: 0
            required: true
