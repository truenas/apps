images:
  image:
    repository: opencloudeu/opencloud-rolling
    tag: 3.7.0
  tika_image:
    repository: apache/tika
    tag: "3.2.3.0-full"
  drawio_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  progress_bars_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  json_viewer_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  external_sites_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  unzip_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  cast_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  importer_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  arcade_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0
  maps_image:
    repository: opencloudeu/web-extensions
    tag: external-sites-1.3.0

consts:
  opencloud_container_name: opencloud
  tika_container_name: tika
  perms_container_name: permissions

  tika_port: 9998

  notes_body: |
    Default Credential:
      - Username: `admin`
      - Password: `admin`

  app_config_notes_body: |
    You have installed an app that needs additional configuration, please see</br>
    the following link on how to convert the config.json config into /etc/opencloud/apps.yaml</br>
    https://docs.opencloud.eu/docs/dev/server/Services/web/Web-info/#application-configuration
  app_map:
    drawio:
      id: draw-io
      container_name: draw-io
      image: drawio_image
      source: /usr/share/nginx/html/draw-io
    progress_bars:
      id: progress-bars
      container_name: progress-bars
      image: progress_bars_image
      source: /usr/share/nginx/html/progress-bars
    json_viewer:
      id: json-viewer
      container_name: json-viewer
      image: json_viewer_image
      source: /usr/share/nginx/html/json-viewer
    external_sites:
      id: external-sites
      container_name: external-sites
      image: external_sites_image
      source: /usr/share/nginx/html/external-sites
      config_url: https://github.com/opencloud-eu/web-extensions/tree/main/packages/web-app-external-sites
    unzip:
      id: unzip
      container_name: unzip
      image: unzip_image
      source: /usr/share/nginx/html/unzip
    cast:
      id: cast
      container_name: cast
      image: cast_image
      source: /usr/share/nginx/html/cast
    importer:
      id: importer
      container_name: importer
      image: importer_image
      source: /usr/share/nginx/html/importer
      config_url: https://github.com/opencloud-eu/web-extensions/tree/main/packages/web-app-importer
    arcade:
      id: arcade
      container_name: arcade
      image: arcade_image
      source: /usr/share/nginx/html/apps/arcade
    maps:
      id: maps
      container_name: maps
      image: maps_image
      source: /usr/share/nginx/html/apps/maps
      config_url: https://github.com/opencloud-eu/web-extensions/tree/main/packages/web-app-maps

  data_path: /var/lib/opencloud
  config_path: /etc/opencloud
  csp_config_path: /etc/opencloud/csp.yaml
  ssl_cert_path: /ix-certs/opencloud.crt
  ssl_key_path: /ix-certs/opencloud.key
  entrypoint_script: |
    #!/bin/sh
    set -e
    if [ ! -f $OC_CONFIG_DIR/opencloud.yaml ]; then
      echo "Config file not found!"
      opencloud init
    fi
    echo "Starting OpenCloud..."
    opencloud server

  csp_config:
    # By default, deny all content sources
    default-src:
      - "'none'"
    child-src:
      - "'self'"
    connect-src:
      - "'self'"
      - "blob:"
    font-src:
      - "'self'"
    frame-ancestors:
      - "'self'"
    frame-src:
      - "'self'"
      - "blob:"
    img-src:
      - "'self'"
      - "data:"
      - "blob:"
    manifest-src:
      - "'self'"
    media-src:
      - "'self'"
    object-src:
      - "'self'"
      - "blob:"
    script-src:
      - "'self'"
      - "'unsafe-inline'"
    style-src:
      - "'self'"
      - "'unsafe-inline'"
