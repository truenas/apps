
groups:
  - name: LLDAP
    description: Configure the directory server
  - name: Networking
    description: Configure external access
  - name: Storage
    description: Configure data persistence

questions:
  - variable: settings
    group: LLDAP
    label: Settings
    schema:
      type: dict
      attrs:
        - variable: domain
          label: LDAP Domain
          description: Base domain used to construct the LDAP suffix (e.g. example.com).
          schema:
            type: string
            default: example.com
            required: true
        - variable: admin_user
          label: Admin Username
          description: Username for the built-in admin account.
          schema:
            type: string
            default: admin
            required: true
        - variable: admin_password
          label: Admin Password
          description: Password for the built-in admin account.
          schema:
            type: password
            required: true

  - variable: networking
    group: Networking
    label: Networking
    schema:
      type: dict
      attrs:
        - variable: web_port
          label: Web UI Port
          schema:
            type: dict
            attrs:
              - variable: bind_mode
                label: Port Bind Mode
                schema:
                  type: string
                  default: published
                  enum:
                    - value: published
                      description: Publish port on the host
                    - value: exposed
                      description: Expose for inter-container communication
                    - value: ''
                      description: None
              - variable: port_number
                label: Port Number
                schema:
                  type: int
                  default: 17170
                  min: 1
                  max: 65535
                  required: true
        - variable: ldap_port
          label: LDAP Port
          schema:
            type: dict
            attrs:
              - variable: bind_mode
                label: Port Bind Mode
                schema:
                  type: string
                  default: published
                  enum:
                    - value: published
                      description: Publish port on the host
                    - value: exposed
                      description: Expose for inter-container communication
                    - value: ''
                      description: None
              - variable: port_number
                label: Port Number
                schema:
                  type: int
                  default: 3890
                  min: 1
                  max: 65535
                  required: true

  - variable: storage
    group: Storage
    label: Data Storage
    schema:
      type: dict
      attrs:
        - variable: data
          label: Data Directory
          schema:
            type: hostPath
            attrs:
              - variable: path
                type: path
                default: /mnt/tank/apps/lldap
                required: true
