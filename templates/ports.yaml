- variable: additional_ports
  label: Additional Ports
  description: Configure the ports for the container
  schema:
    type: list
    items:
      - variable: type
        label: Type
        description: The type of port
        schema:
          type: string
          default: "single"
          required: true
          enum:
            - value: single
              description: Single
            - value: range
              description: Range
      - variable: protocol
        label: Protocol
        description: The port protocol
        schema:
          type: string
          default: "tcp"
          required: true
          enum:
            - value: tcp
              description: TCP
            - value: udp
              description: UDP
      - variable: host_ip
        label: Host IP (Optional)
        description: |
          The host IP to bind the port(s)
          Empty means bind to all IPs
        schema:
          type: ipaddr
          cidr: false
          default: ""

      # Single type
      - variable: target
        label: Container Port
        description: The port exposed by the container
        schema:
          type: integer
          min: 1
          max: 65535
          show_if: [["type", "=", "single"]]
          required: true
      - variable: published
        label: Published Port
        description: The port on the host
        schema:
          type: integer
          min: 1
          max: 65535
          show_if: [["type", "=", "single"]]
          required: true

      # Range type
      - variable: target_start
        label: Container Port Start
        description: The first port of the range exposed by the container
        schema:
          type: integer
          min: 1
          max: 65535
          show_if: [["type", "=", "range"]]
          required: true
      - variable: target_end
        label: Container Port End
        description: The last port of the range exposed by the container
        schema:
          type: integer
          min: 1
          max: 65535
          show_if: [["type", "=", "range"]]
          required: true
      - variable: published_start
        label: Published Port Start
        description: The first port of the range on the host
        schema:
          type: integer
          min: 1
          max: 65535
          show_if: [["type", "=", "range"]]
          required: true
      - variable: published_end
        label: Published Port End
        description: The last port of the range on the host
        schema:
          type: integer
          min: 1
          max: 65535
          show_if: [["type", "=", "range"]]
          required: true
# Notes:
# Validate that range start is smaller than range end
# Validate that both target and publish ranges are equal in length
#
