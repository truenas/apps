template:
  # This should probably be outside of the app install form
  # Each network can be used by multiple containers and stacks/apps
  name: networks
  items:
    - variable: networks
      label: Networks
      description: |
        The networks to connect this container to
      schema:
        type: list
        items:
          - variable: name
            label: Network Name
            description: The name of the network
            schema:
              type: string
              required: true
          - variable: driver
            label: Driver
            description: The network driver
            schema:
              type: string
              default: bridge
              required: true
              enum:
                - value: bridge
                  description: Bridge
                - value: host
                  description: Host
                - value: none
                  description: None
                - value: ipvlan
                  description: Ipvlan
                - value: macvlan
                  description: Macvlan
          - variable: ipam
            label: IPAM
            # https://docs.docker.com/compose/compose-file/06-networks/#ipam
            description: The IPAM configuration for the network
            schema:
              type: dict
              attrs:
                - variable: config
                  label: Config
                  description: The IPAM configuration
                  schema:
                    type: list
                    items:
                      - variable: subnet
                        label: Subnet
                        description: The subnet
                        schema:
                          type: ipaddr
                          cidr: true
                      - variable: gateway
                        label: Gateway
                        description: The gateway
                        schema:
                          type: ipaddr
                          cidr: false
                      - variable: ip_range
                        label: IP Range
                        description: The IP range
                        schema:
                          type: ipaddr
                          cidr: true
                      - variable: aux_addresses
                        label: Auxiliary Addresses
                        description: The auxiliary addresses
                        schema:
                          type: list
                          items:
                            - variable: host
                              label: Host
                              schema:
                                type: string
                                required: true
                            - variable: ip
                              label: IP
                              description: The IP
                              schema:
                                type: ipaddr
                                cidr: false
                                required: true
